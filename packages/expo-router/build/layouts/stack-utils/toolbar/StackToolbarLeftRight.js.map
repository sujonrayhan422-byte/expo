{"version":3,"file":"StackToolbarLeftRight.js","sourceRoot":"","sources":["../../../../src/layouts/stack-utils/toolbar/StackToolbarLeftRight.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client';\nimport { NativeStackNavigationOptions } from '@react-navigation/native-stack';\nimport React, { Fragment, isValidElement, type ReactNode } from 'react';\nimport { useMemo } from 'react';\n\nimport {\n  convertStackToolbarButtonPropsToRNHeaderItem,\n  StackToolbarButton,\n} from './StackToolbarButton';\nimport { convertStackToolbarMenuPropsToRNHeaderItem, StackToolbarMenu } from './StackToolbarMenu';\nimport {\n  convertStackToolbarSpacerPropsToRNHeaderItem,\n  StackToolbarSpacer,\n} from './StackToolbarSpacer';\nimport { convertStackToolbarViewPropsToRNHeaderItem, StackToolbarView } from './StackToolbarView';\nimport { ToolbarPlacementContext, useToolbarPlacement } from './context';\nimport { isChildOfType } from '../../../utils/children';\nimport { Screen } from '../../../views/Screen';\n\nexport interface StackToolbarLeftProps {\n  /**\n   * Child elements to compose the left area of the header. Can include Stack.Toolbar.Button,\n   * Stack.Toolbar.Menu, Stack.Toolbar.View, and Stack.Toolbar.Spacer components.\n   */\n  children?: ReactNode;\n  /**\n   * When `true`, renders children as a custom component in the header left area,\n   * replacing the default header left layout.\n   *\n   * @default false\n   */\n  asChild?: boolean;\n}\n\nexport interface StackToolbarRightProps {\n  /**\n   * Child elements to compose the right area of the header. Can include Stack.Toolbar.Button,\n   * Stack.Toolbar.Menu, Stack.Toolbar.View, and Stack.Toolbar.Spacer components.\n   */\n  children?: ReactNode;\n  /**\n   * When `true`, renders children as a custom component in the header right area,\n   * replacing the default header right layout.\n   *\n   * @default false\n   */\n  asChild?: boolean;\n}\n\n/**\n * The component used to configure the left area of the stack header toolbar.\n *\n * When used inside a screen, it allows you to customize the left side of the header dynamically.\n *\n * > **Note:** Using `Stack.Toolbar.Left` will automatically make the header visible\n * (`headerShown: true`), as the toolbar is rendered as part of the native header.\n *\n * > **Note**: Stack.Toolbar.Left is an experimental API and may change without notice.\n *\n * @example\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Layout() {\n *   return (\n *     <Stack>\n *       <Stack.Screen name=\"index\">\n *         <Stack.Toolbar.Left>\n *           <Stack.Toolbar.Button icon=\"sidebar.left\" onPress={() => alert('Left button pressed!')} />\n *         </Stack.Toolbar.Left>\n *       </Stack.Screen>\n *     </Stack>\n *   );\n * }\n * ```\n *\n * @example\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Page() {\n *   return (\n *     <>\n *       <Stack.Toolbar.Left>\n *         <Stack.Toolbar.Button icon=\"sidebar.left\" onPress={() => alert('Left button pressed!')} />\n *       </Stack.Toolbar.Left>\n *       <ScreenContent />\n *     </>\n *   );\n * }\n * ```\n */\nexport const StackToolbarLeft: React.FC<StackToolbarLeftProps> = (props) => {\n  const parentPlacement = useToolbarPlacement();\n  if (parentPlacement) {\n    throw new Error(\n      `Stack.Toolbar.Left cannot be nested inside Stack.Toolbar.${parentPlacement.charAt(0).toUpperCase() + parentPlacement.slice(1)}. Toolbars must be placed at the top level of a screen.`\n    );\n  }\n\n  // This component will only render when used inside a page\n  const updatedOptions = useMemo(() => appendStackToolbarLeftPropsToOptions({}, props), [props]);\n  return (\n    <ToolbarPlacementContext.Provider value=\"left\">\n      <Screen options={updatedOptions} />\n    </ToolbarPlacementContext.Provider>\n  );\n};\n\n/**\n * The component used to configure the right area of the stack header toolbar.\n *\n * When used inside a screen, it allows you to customize the right side of the header dynamically.\n *\n * > **Note:** Using `Stack.Toolbar.Right` will automatically make the header visible\n * (`headerShown: true`), as the toolbar is rendered as part of the native header.\n *\n * > **Note**: Stack.Toolbar.Right is an experimental API and may change without notice.\n *\n * @example\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Layout() {\n *   return (\n *     <Stack>\n *       <Stack.Screen name=\"index\">\n *         <Stack.Toolbar.Right>\n *           <Stack.Toolbar.Button icon=\"ellipsis.circle\" onPress={() => alert('Right button pressed!')} />\n *         </Stack.Toolbar.Right>\n *       </Stack.Screen>\n *     </Stack>\n *   );\n * }\n * ```\n *\n * @example\n * ```tsx\n * import { Stack } from 'expo-router';\n *\n * export default function Page() {\n *   return (\n *     <>\n *       <Stack.Toolbar.Right>\n *         <Stack.Toolbar.Button icon=\"ellipsis.circle\" onPress={() => alert('Right button pressed!')} />\n *       </Stack.Toolbar.Right>\n *       <ScreenContent />\n *     </>\n *   );\n * }\n * ```\n */\nexport const StackToolbarRight: React.FC<StackToolbarRightProps> = (props) => {\n  const parentPlacement = useToolbarPlacement();\n  if (parentPlacement) {\n    throw new Error(\n      `Stack.Toolbar.Right cannot be nested inside Stack.Toolbar.${parentPlacement.charAt(0).toUpperCase() + parentPlacement.slice(1)}. Toolbars must be placed at the top level of a screen.`\n    );\n  }\n\n  // This component will only render when used inside a page\n  const updatedOptions = useMemo(() => appendStackToolbarRightPropsToOptions({}, props), [props]);\n  return (\n    <ToolbarPlacementContext.Provider value=\"right\">\n      <Screen options={updatedOptions} />\n    </ToolbarPlacementContext.Provider>\n  );\n};\n\nfunction convertToolbarChildrenToUnstableItems(\n  children: React.ReactNode,\n  side: 'Left' | 'Right'\n):\n  | NativeStackNavigationOptions['unstable_headerRightItems']\n  | NativeStackNavigationOptions['unstable_headerLeftItems'] {\n  const allChildren = React.Children.toArray(children);\n  const actions = allChildren.filter(\n    (child) =>\n      isChildOfType(child, StackToolbarButton) ||\n      isChildOfType(child, StackToolbarMenu) ||\n      isChildOfType(child, StackToolbarSpacer) ||\n      isChildOfType(child, StackToolbarView)\n  );\n  if (actions.length !== allChildren.length && process.env.NODE_ENV !== 'production') {\n    const otherElements = allChildren\n      .filter((child) => !actions.some((action) => action === child))\n      .map((e) => {\n        if (isValidElement(e)) {\n          if (e.type === Fragment) {\n            return '<Fragment>';\n          } else {\n            return (e.type as { name: string })?.name ?? e.type;\n          }\n        }\n\n        return String(e);\n      });\n    console.warn(\n      `Stack.Toolbar.${side} only accepts <Stack.Toolbar.Button>, <Stack.Toolbar.Menu>, <Stack.Toolbar.View>, and <Stack.Toolbar.Spacer> as children. Found invalid children: ${otherElements.join(', ')}`\n    );\n  }\n  return () =>\n    actions\n      .map((action) => {\n        if (isChildOfType(action, StackToolbarButton)) {\n          return convertStackToolbarButtonPropsToRNHeaderItem(action.props);\n        } else if (isChildOfType(action, StackToolbarMenu)) {\n          return convertStackToolbarMenuPropsToRNHeaderItem(action.props);\n        } else if (isChildOfType(action, StackToolbarSpacer)) {\n          return convertStackToolbarSpacerPropsToRNHeaderItem(action.props);\n        }\n        return convertStackToolbarViewPropsToRNHeaderItem(action.props);\n      })\n      .filter((item) => !!item);\n}\n\nexport function appendStackToolbarLeftPropsToOptions(\n  options: NativeStackNavigationOptions,\n  props: StackToolbarLeftProps\n): NativeStackNavigationOptions {\n  if (props.asChild) {\n    return {\n      ...options,\n      headerShown: true,\n      headerLeft: () => props.children,\n    };\n  }\n\n  return {\n    ...options,\n    headerShown: true,\n    unstable_headerLeftItems: convertToolbarChildrenToUnstableItems(props.children, 'Left'),\n  };\n}\n\nexport function appendStackToolbarRightPropsToOptions(\n  options: NativeStackNavigationOptions,\n  props: StackToolbarRightProps\n): NativeStackNavigationOptions {\n  if (props.asChild) {\n    return {\n      ...options,\n      headerShown: true,\n      headerRight: () => props.children,\n    };\n  }\n\n  return {\n    ...options,\n    headerShown: true,\n    unstable_headerRightItems: convertToolbarChildrenToUnstableItems(props.children, 'Right'),\n  };\n}\n"]}